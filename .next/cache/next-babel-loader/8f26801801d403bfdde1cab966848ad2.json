{"ast":null,"code":"import * as React from 'react';\n/*[\r\n  {\r\n    cartAvo: {},\r\n    quantity: 5\r\n  },\r\n  {\r\n    cartAvo: {},\r\n    quantity: 3\r\n  }\r\n]*/\n\nconst CartAvosContext = /*#__PURE__*/React.createContext([]);\n\nfunction cartAvosReducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      {\n        const {\n          cartAvo,\n          quantity\n        } = action.payload;\n        const item = state.cartAvos.find(el => el.id === cartAvo.id);\n        const newState = [...state];\n\n        if (item) {\n          //update\n          item.quantity = quantity;\n          const index = newState.findIndex(el => el.id === cartAvo.id);\n          newState[index] = item;\n        } else {\n          //add\n          newState.push(action.payload);\n        }\n\n        return newState;\n      }\n  }\n}\n\nfunction CartProvider({\n  children\n}) {\n  const [state, dispatch] = React.useReducer(cartAvosReducer);\n}\n\nexport default CartAvosContext;","map":{"version":3,"sources":["C:/code/avocado-store/contexts/cartAvosContext.ts"],"names":["React","CartAvosContext","createContext","cartAvosReducer","state","action","type","cartAvo","quantity","payload","item","cartAvos","find","el","id","newState","index","findIndex","push","CartProvider","children","dispatch","useReducer"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAYA,MAAMC,eAAe,gBAAGD,KAAK,CAACE,aAAN,CACtB,EADsB,CAAxB;;AAIA,SAASC,eAAT,CAAyBC,KAAzB,EAAqCC,MAArC,EAAkD;AAChD,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,KAAL;AAAY;AACV,cAAM;AAAEC,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAAwBH,MAAM,CAACI,OAArC;AACA,cAAMC,IAAI,GAAGN,KAAK,CAACO,QAAN,CAAeC,IAAf,CAAqBC,EAAD,IAAkBA,EAAE,CAACC,EAAH,KAAUP,OAAO,CAACO,EAAxD,CAAb;AACA,cAAMC,QAAQ,GAAG,CAAC,GAAGX,KAAJ,CAAjB;;AACA,YAAIM,IAAJ,EAAU;AACR;AACAA,UAAAA,IAAI,CAACF,QAAL,GAAgBA,QAAhB;AACA,gBAAMQ,KAAK,GAAGD,QAAQ,CAACE,SAAT,CAAoBJ,EAAD,IAAkBA,EAAE,CAACC,EAAH,KAAUP,OAAO,CAACO,EAAvD,CAAd;AACAC,UAAAA,QAAQ,CAACC,KAAD,CAAR,GAAkBN,IAAlB;AACD,SALD,MAKO;AACL;AACAK,UAAAA,QAAQ,CAACG,IAAT,CAAcb,MAAM,CAACI,OAArB;AACD;;AACD,eAAOM,QAAP;AACD;AAfH;AAiBD;;AAED,SAASI,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAClC,QAAM,CAAChB,KAAD,EAAQiB,QAAR,IAAoBrB,KAAK,CAACsB,UAAN,CAAiBnB,eAAjB,CAA1B;AACD;;AAED,eAAeF,eAAf","sourcesContent":["import * as React from 'react'\r\n\r\n/*[\r\n  {\r\n    cartAvo: {},\r\n    quantity: 5\r\n  },\r\n  {\r\n    cartAvo: {},\r\n    quantity: 3\r\n  }\r\n]*/\r\n\r\ninterface CartContextProps {\r\n  cartAvos: TProduct\r\n  quantity: number\r\n}\r\n\r\ninterface CartAvosAction {\r\n  type: string\r\n  payload: CartContextProps\r\n}\r\n\r\nconst CartAvosContext = React.createContext<CartContextProps[]>(\r\n  [] as CartContextProps[]\r\n)\r\n\r\nfunction cartAvosReducer(state: any, action: any) {\r\n  switch (action.type) {\r\n    case 'add': {\r\n      const { cartAvo, quantity } = action.payload\r\n      const item = state.cartAvos.find((el: TProduct) => el.id === cartAvo.id)\r\n      const newState = [...state]\r\n      if (item) {\r\n        //update\r\n        item.quantity = quantity\r\n        const index = newState.findIndex((el: TProduct) => el.id === cartAvo.id)\r\n        newState[index] = item\r\n      } else {\r\n        //add\r\n        newState.push(action.payload)\r\n      }\r\n      return newState\r\n    }\r\n  }\r\n}\r\n\r\nfunction CartProvider({ children }) {\r\n  const [state, dispatch] = React.useReducer(cartAvosReducer)\r\n}\r\n\r\nexport default CartAvosContext\r\n"]},"metadata":{},"sourceType":"module"}