{"ast":null,"code":"import * as React from 'react';\n/*[\r\n  {\r\n    cartAvo: {},\r\n    quantity: 5\r\n  },\r\n  {\r\n    cartAvo: {},\r\n    quantity: 3\r\n  }\r\n]*/\n\nconst initialState = {\n  cartAvo: {},\n  quantity: 0\n};\nconst CartAvosContext = /*#__PURE__*/React.createContext([]);\n\nfunction cartAvosReducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      {\n        const {\n          cartAvo,\n          quantity\n        } = action.payload;\n        const item = state.cartAvos.find(el => el.id === cartAvo.id);\n        const newState = [...state];\n\n        if (item) {\n          //update\n          item.quantity = quantity;\n          const index = newState.findIndex(el => el.id === cartAvo.id);\n          newState[index] = item;\n        } else {\n          //add\n          newState.push(action.payload);\n        }\n\n        return newState;\n      }\n  }\n}\n\nfunction CartProvider({\n  children\n}) {\n  const [state, dispatch] = React.useReducer(cartAvosReducer, initialState);\n}\n\nexport default CartAvosContext;","map":{"version":3,"sources":["C:/code/avocado-store/contexts/cartAvosContext.ts"],"names":["React","initialState","cartAvo","quantity","CartAvosContext","createContext","cartAvosReducer","state","action","type","payload","item","cartAvos","find","el","id","newState","index","findIndex","push","CartProvider","children","dispatch","useReducer"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAYA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,OAAO,EAAE,EADU;AAEnBC,EAAAA,QAAQ,EAAE;AAFS,CAArB;AAKA,MAAMC,eAAe,gBAAGJ,KAAK,CAACK,aAAN,CACtB,EADsB,CAAxB;;AAIA,SAASC,eAAT,CAAyBC,KAAzB,EAAqCC,MAArC,EAA6D;AAC3D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,KAAL;AAAY;AACV,cAAM;AAAEP,UAAAA,OAAF;AAAWC,UAAAA;AAAX,YAAwBK,MAAM,CAACE,OAArC;AACA,cAAMC,IAAI,GAAGJ,KAAK,CAACK,QAAN,CAAeC,IAAf,CAAqBC,EAAD,IAAkBA,EAAE,CAACC,EAAH,KAAUb,OAAO,CAACa,EAAxD,CAAb;AACA,cAAMC,QAAQ,GAAG,CAAC,GAAGT,KAAJ,CAAjB;;AACA,YAAII,IAAJ,EAAU;AACR;AACAA,UAAAA,IAAI,CAACR,QAAL,GAAgBA,QAAhB;AACA,gBAAMc,KAAK,GAAGD,QAAQ,CAACE,SAAT,CAAoBJ,EAAD,IAAkBA,EAAE,CAACC,EAAH,KAAUb,OAAO,CAACa,EAAvD,CAAd;AACAC,UAAAA,QAAQ,CAACC,KAAD,CAAR,GAAkBN,IAAlB;AACD,SALD,MAKO;AACL;AACAK,UAAAA,QAAQ,CAACG,IAAT,CAAcX,MAAM,CAACE,OAArB;AACD;;AACD,eAAOM,QAAP;AACD;AAfH;AAiBD;;AAED,SAASI,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAClC,QAAM,CAACd,KAAD,EAAQe,QAAR,IAAoBtB,KAAK,CAACuB,UAAN,CAAiBjB,eAAjB,EAAkCL,YAAlC,CAA1B;AACD;;AAED,eAAeG,eAAf","sourcesContent":["import * as React from 'react'\r\n\r\n/*[\r\n  {\r\n    cartAvo: {},\r\n    quantity: 5\r\n  },\r\n  {\r\n    cartAvo: {},\r\n    quantity: 3\r\n  }\r\n]*/\r\n\r\ninterface CartContextProps {\r\n  cartAvo: TProduct\r\n  quantity: number\r\n}\r\n\r\ninterface CartAvosAction {\r\n  type: string\r\n  payload: CartContextProps\r\n}\r\n\r\nconst initialState = {\r\n  cartAvo: {} as TProduct,\r\n  quantity: 0,\r\n}\r\n\r\nconst CartAvosContext = React.createContext<CartContextProps[]>(\r\n  [] as CartContextProps[]\r\n)\r\n\r\nfunction cartAvosReducer(state: any, action: CartAvosAction) {\r\n  switch (action.type) {\r\n    case 'add': {\r\n      const { cartAvo, quantity } = action.payload\r\n      const item = state.cartAvos.find((el: TProduct) => el.id === cartAvo.id)\r\n      const newState = [...state]\r\n      if (item) {\r\n        //update\r\n        item.quantity = quantity\r\n        const index = newState.findIndex((el: TProduct) => el.id === cartAvo.id)\r\n        newState[index] = item\r\n      } else {\r\n        //add\r\n        newState.push(action.payload)\r\n      }\r\n      return newState\r\n    }\r\n  }\r\n}\r\n\r\nfunction CartProvider({ children }) {\r\n  const [state, dispatch] = React.useReducer(cartAvosReducer, initialState)\r\n}\r\n\r\nexport default CartAvosContext\r\n"]},"metadata":{},"sourceType":"module"}